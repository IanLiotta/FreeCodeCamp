<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>FCC Calculator Project</title>
</head>

<body>
    <h1>Free Code Camp Calculator Project</h1>
    <br/>
    <div class="calcContainer">

        <div class="outputDisplay" id="history"></div>
        <div class="outputDisplay" id="output"></div>

        <button class="calcButton" onclick="allClear()">AC</button>
        <button class="calcButton" onclick="clearEntry()">CE</button>
        <button class="calcButton" onclick="pushOp('/')">/</button>
        <button class="calcButton" onclick="pushOp('x')">X</button>

        <button class="calcButton" onclick="pushNum(7)">7</button>
        <button class="calcButton" onclick="pushNum(8)">8</button>
        <button class="calcButton" onclick="pushNum(9)">9</button>
        <button class="calcButton" onclick="pushOp('-')">-</button>

        <button class="calcButton" onclick="pushNum(4)">4</button>
        <button class="calcButton" onclick="pushNum(5)">5</button>
        <button class="calcButton" onclick="pushNum(6)">6</button>
        <button class="calcButton" onclick="pushOp('+')">+</button>

        <button class="calcButton" onclick="pushNum(1)">1</button>
        <button class="calcButton" onclick="pushNum(2)">2</button>
        <button class="calcButton" onclick="pushNum(3)">3</button>        
        <button class="calcButton tallButton" id="equals" onclick="equals()">=</button>

        <button class="calcButton wideButton" onclick="pushNum(0)">0</button>
        <button class="calcButton" onclick="pushNum('.')">.</button>


    </div>

    <script>
    let result = undefined,
        currentNumber = '',
        currentOperation = '',
        lastNumber = '';
    let stack = [];

        updateDisplay('');

    function pushNum(newNumber) {
        currentNumber = "" + currentNumber + newNumber;
        stack.push(newNumber);
        updateDisplay(currentNumber);
    }

    function pushOp(operation) {
        stack.push(operation);
        updateDisplay(operation);
        currentOperation = operation;
        if(lastNumber === '') {
            lastNumber = currentNumber;
            result = currentNumber;
            currentNumber = '';
        }
        else {
            doMath(operation);
            stack.push(operation);
        }
    }

    function doMath(operation) {
        if(currentNumber === '') {
            // currentNumber = lastNumber;
            updateDisplay('Error');
            return 0;
        }
        switch(operation) {
            case 'x':
                result = parseFloat(result) * parseFloat(currentNumber);
                break;
            case '+':
                result = parseFloat(result) + parseFloat(currentNumber);
                break;
            case '-':
                result = parseFloat(result) - parseFloat(currentNumber);
                break;
            case '/':
                result = parseFloat(result) / parseFloat(currentNumber);
                break;
            default:
                result = 0;
        }
        stack.push(result);
        updateDisplay(result);
        currentNumber = '';
    }

    function equals() {
        if(lastNumber !== ''){
            stack.push('=');
            doMath(currentOperation);
        }
        lastNumber = '';
        currentNumber = result;
        
    }

    function updateDisplay(result) {
        document.getElementById("history").innerHTML = stack.join('');
        document.getElementById("output").innerHTML = result;
    }

    function allClear() {
        stack = [];
        currentNumber = '';
        lastNumber = '';
        currentOperation = '';
        result = undefined;
        updateDisplay('');
    }

    function clearEntry() {
        currentNumber = '';
        document.getElementById("output").innerHTML = '';
    }
    </script>

</body>
</html>